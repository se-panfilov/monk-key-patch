var Monkey=function(config){"use strict";config||console.error("Error: no config"),config.body.linesDelimiter=config.body.linesDelimiter||"\n";var isBefore=!!config.before,isAfter=!!config.after,_p={getLineNumber:function(e){e=e.trim();var i=e.indexOf(",");return i===-1?+e:+e.substr(0,e.indexOf(","))},getColumnNumber:function(e){e=e.trim();var i=e.indexOf(",");return i===-1?null:+e.substr(e.indexOf(",")+1)},getColumnWeight:function(e){var i=this.getColumnNumber(e);return i||0===i?i:-(1/0)},compareColumns:function(e,i){return e<0&&e>-(1/0)&&i<0&&i>-(1/0)?e-i:i-e},sortNumberArr:function(e){var i=function(e,i){return _p.getLineNumber(e)===_p.getLineNumber(i)?_p.compareColumns(_p.getColumnWeight(e),_p.getColumnWeight(i)):_p.getLineNumber(i)-_p.getLineNumber(e)};return e.sort(i)},getStrArr:function(e,i){var n=e.toString().split(i);return n.splice(0,1),n.splice(n.length-1,1),n},makeFn:function(fnArr,originalFn,linesDelimiter,isEval){var fnName=this.getFnName(originalFn),fnStr=fnArr.join(linesDelimiter),fnArgs=this.getParamNames(originalFn),result;return isEval?result=eval("(function "+fnName+"("+fnArgs.toString+") {"+fnStr+"})"):(fnName&&(fnStr="return function "+fnName+" () {"+fnStr+"};"),result=new Function(fnArgs,fnStr)),result},modifyBody:function(e,i){return i.positions&&(e=this.modifyAtPositions(e,i.positions)),i.regexps&&(e=this.modifyAtRegexp(e,i.regexps)),e},injectAtLine:function(e,i,n){var t=this.getLineNumber(i),r=this.getColumnNumber(i),o=!r&&0!==r;return e[t]=e[t].trim(),(r>e[t].length||o)&&(r=e[t].length),"function"==typeof n&&(n=n()),e[t]=e[t].slice(0,r)+n+e[t].slice(r),e},isIllegalKey:function(e,i){for(var n,t=0;t<e.length;t++){var r=e[t];if(n=this.getLineNumber(r),n<0||n>=i.length)return!0}return!1},modifyAtPositions:function(e,i){var n=this.sortNumberArr(Object.keys(i));if(this.isIllegalKey(n,e))return console.error("Illegal key present");for(var t=0;t<n.length;t++){var r=n[t],o=i[r];this.injectAtLine(e,r,o)}return e},wrapRegex:function(e){var i=0===e.indexOf("/")&&e.lastIndexOf("/");return i?e:"/"+e+"/"},modifyAtRegexp:function(e,i,n){var t=e.join(n);for(var r in i)if(i.hasOwnProperty(r)){var o=i[r];if("function"==typeof o){for(var s,f=[];null!==(s=r.exec(t));)f.push(s.index);for(var u=0;u<f.length;u++){var l=f[u],g=[{}];g[0][l]=o,t=this.modifyAtPositions(this.getStrArr(t),g).join(n)}}else t.replace(this.wrapRegex(r),o)}return this.getStrArr(e,config.body.linesDelimiter)},getFnName:function(e){if(e.name)return e.name;var i=/^function\s+([\w\$]+)\s*\(/,n=i.exec(e.toString());return n?n[1]:null},getParamNames:function(e){var i=/(\/\/.*$)|(\/\*[\s\S]*?\*\/)|(\s*=[^,\)]*(('(?:\\'|[^'\r\n])*')|("(?:\\"|[^"\r\n])*"))|(\s*=[^,\)]*))/gm,n=/([^\s,]+)/g,t=e.toString().replace(i,""),r=t.slice(t.indexOf("(")+1,t.indexOf(")")).match(n);return r||[]}},exports={config:config,originalFn:null,modifiedFn:null,linesDelimiter:config.body.linesDelimiter,before:config.before,after:config.after,isLazy:!1,punch:function(){if(this.originalFn=this.config.obj[this.config.method],this.config.body){this.modifiedFn=this.config.obj[this.config.method];var e=_p.getStrArr(this.modifiedFn,this.linesDelimiter);_p.modifyBody(e,config.body),this.modifiedFn=_p.makeFn(e,this.originalFn,this.linesDelimiter)}if(this.before||this.after){var i=this;this.config.obj[this.config.method]=function(){isBefore&&i.before(arguments);var e=i.modifiedFn?i.modifiedFn(arguments):i.originalFn(arguments);return isAfter&&i.after(arguments),e}}else this.config.obj[this.config.method]=this.modifiedFn||this.originalFn;return this},restore:function(){return config.obj[config.method]=this.original,this.isModified=!1,this},clear:function(e){return this}};return exports.isLazy?exports:exports.punch()};"object"==typeof module&&module.exports&&(module.exports=Monkey);
//# sourceMappingURL=monkey-punch.min.js.map
